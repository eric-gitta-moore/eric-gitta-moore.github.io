<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Eric Moore</title>
  
  <subtitle>学海无涯，共同进步！</subtitle>
  <link href="https://eric-gitta-moore.github.io/atom.xml" rel="self"/>
  
  <link href="https://eric-gitta-moore.github.io/"/>
  <updated>2024-06-07T10:22:27.270Z</updated>
  <id>https://eric-gitta-moore.github.io/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>p10k ohmyzsh 右侧 nvm 版本显示错误为 system，不显示具体版本号</title>
    <link href="https://eric-gitta-moore.github.io/2024/p10k-ohmyzsh-the-error-of-the-nvm-version-on-the-right-is-system-and-the-specific-version-is-not-displayed/"/>
    <id>https://eric-gitta-moore.github.io/2024/p10k-ohmyzsh-the-error-of-the-nvm-version-on-the-right-is-system-and-the-specific-version-is-not-displayed/</id>
    <published>2024-06-07T09:58:57.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="病因"><a href="#病因" class="headerlink" title="病因"></a>病因</h2><p><code>~/.nvm/versions/node</code> 下面的目录不能是软链接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[~/.nvm/versions/node]❯ l                                                               </span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x  10 admin  staff   320B  6  7 18:01 .</span><br><span class="line">drwxr-xr-x   3 admin  staff    96B  4 25 16:07 ..</span><br><span class="line">drwxr-xr-x   6 admin  staff   192B  6  7 16:53 v14.21.3</span><br><span class="line">lrwxr-xr-x   1 admin  staff    45B  6  7 18:01 v14.21.999 -&gt; /Users/admin/workspace/prebuild-node/v14.21.3</span><br><span class="line">drwxr-xr-x   9 admin  staff   288B  5 21 12:34 v15.14.0</span><br><span class="line">drwxr-xr-x   9 admin  staff   288B  4 30 14:37 v16.20.2</span><br><span class="line">drwxr-xr-x   9 admin  staff   288B  4 30 14:37 v18.20.2</span><br><span class="line">drwxr-xr-x   9 admin  staff   288B  4 30 14:36 v20.12.2</span><br><span class="line">drwxr-xr-x   9 admin  staff   288B  5 16 02:41 v20.13.1</span><br><span class="line">drwxr-xr-x   9 admin  staff   288B  6  6 23:29 v20.14.0</span><br></pre></td></tr></table></figure><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>把对应的构建后文件复制过来</p><p>注意，复制之后 <code>bin</code> 目录下面的软链接会丢失，要重新手动链接</p><h2 id="问题定位"><a href="#问题定位" class="headerlink" title="问题定位"></a>问题定位</h2><p><strong>目标</strong>：找到显示 nvm 版本号的源码</p><p>先从官方文档入手，发现右侧显示信息是可以配置的，<a href="https://github.com/romkatv/powerlevel10k?tab=readme-ov-file#batteries-included">https://github.com/romkatv/powerlevel10k?tab=readme-ov-file#batteries-included</a></p><p>于是打开 p10k 源码，直接搜索大法，找几个名字长一些比较有个性的配置项</p><p>我选 <code>cpu_arch</code> 搜索出来有 27 个结果</p><p><img src="/../../../../static/images/image.png" alt="alt text"></p><p>然后一个个观察，发现最后两个函数比较可疑</p><p><img src="/../../../../static/images/image-1.png" alt="alt text"></p><p><code>prompt_cpu_arch</code> 比较像是显示的</p><p>接着在这个文件里面继续搜索 <code>nvm</code> 相关</p><p>找葫芦画瓢，改成 <code>prompt_nvm</code> 搜一下看看</p><p><img src="/../../../../static/images/image-2.png" alt="alt text"></p><p>好家伙这一下就看到一个叫 <code>system</code> 的字样</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">prompt_nvm() &#123;</span><br><span class="line">  [[ -n $NVM_DIR ]] &amp;&amp; _p9k_nvm_ls_current || return</span><br><span class="line">  local current=$_p9k__ret</span><br><span class="line">  (( _POWERLEVEL9K_NVM_SHOW_SYSTEM )) ||</span><br><span class="line">    [[ $current != system ]]          ||</span><br><span class="line">    return</span><br><span class="line">  (( _POWERLEVEL9K_NVM_PROMPT_ALWAYS_SHOW )) ||</span><br><span class="line">    ! _p9k_nvm_ls_default                    ||</span><br><span class="line">    [[ $_p9k__ret != $current ]]             ||</span><br><span class="line">    return</span><br><span class="line">  _p9k_prompt_segment &quot;$0&quot; &quot;magenta&quot; &quot;black&quot; &#x27;NODE_ICON&#x27; 0 &#x27;&#x27; &quot;$&#123;$&#123;current#v&#125;//\%/%%&#125;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由此可知，<code>system</code> 是 <code>$current</code> 变量的一个值，通过调用 <code>_p9k_nvm_ls_current</code> 的返回</p><p>继续搜索 <code>_p9k_nvm_ls_current</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The same as `nvm_version current` but faster.</span></span><br><span class="line">_p9k_nvm_ls_current() &#123;</span><br><span class="line">  local node_path=$&#123;commands[node]:A&#125;</span><br><span class="line">  [[ -n $node_path ]] || return</span><br><span class="line"></span><br><span class="line">  local nvm_dir=$&#123;NVM_DIR:A&#125;</span><br><span class="line">  if [[ -n $nvm_dir &amp;&amp; $node_path == $nvm_dir/versions/io.js/* ]]; then</span><br><span class="line">    _p9k_cached_cmd 0 &#x27;&#x27; iojs --version || return</span><br><span class="line">    _p9k__ret=iojs-v$&#123;_p9k__ret#v&#125;</span><br><span class="line">  elif [[ -n $nvm_dir &amp;&amp; $node_path == $nvm_dir/* ]]; then</span><br><span class="line">    _p9k_cached_cmd 0 &#x27;&#x27; node --version || return</span><br><span class="line">    _p9k__ret=v$&#123;_p9k__ret#v&#125;</span><br><span class="line">  else</span><br><span class="line">    _p9k__ret=system</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一个个条件看了下 <code>$nvm_dir/versions/io.js/*</code> 我的 nvm 好像没得这个文件应该不是，而且也没看到过 prompt 显示 <code>iojs-v14.23.4</code> 这种版本号</p><p>应该是下面这个 <code>p9k__ret=v$&#123;_p9k__ret#v&#125;</code></p><p>一看判断调节，这下真相大白了 <code>$node_path == $nvm_dir/*</code></p><blockquote><p><code>local node_path=$&#123;commands[node]:A&#125;</code><br>这个修饰符 <code>A</code> 是获取真实路径的</p></blockquote><p>原来是判断了 node 的真实路径和 NVM_DIR 环境变量是否前缀匹配</p><p>我这里是从其他目录 ln -s 过去的，肯定走不通这条判断</p><p>遂重新 <code>./configure --prefix=</code> 到 nvm 的目录下面</p><p>done</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;病因&quot;&gt;&lt;a href=&quot;#病因&quot; class=&quot;headerlink&quot; title=&quot;病因&quot;&gt;&lt;/a&gt;病因&lt;/h2&gt;&lt;p&gt;&lt;code&gt;~/.nvm/versions/node&lt;/code&gt; 下面的目录不能是软链接&lt;/p&gt;
&lt;figure class=&quot;highl</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>macOS 安装 node-sass + conda python2.7</title>
    <link href="https://eric-gitta-moore.github.io/2024/macos-install-node-sass-conda-python2-7/"/>
    <id>https://eric-gitta-moore.github.io/2024/macos-install-node-sass-conda-python2-7/</id>
    <published>2024-06-07T08:50:13.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>个别前端项目有使用 node-sass 依赖</p><p>最开始尝试使用 node 16，但是发现无法编译 node-sass</p><p>于是尝试修改为同年份的 sass，发现个别语法不兼容</p><p>之后手动编译了 node 14 arm 版本，而且 node-sass 依赖 python2，需要配合 conda python2.7 才安装上来的</p><p>但是 mac Apple Silicon Chip 又是 arm 架构，当时 python 2.7 早就 EOL 了</p><h2 id="坑点"><a href="#坑点" class="headerlink" title="坑点"></a>坑点</h2><p>主要坑点在于 conda python2.7 的安装</p><p>目前 conda 已经把 python2 的源剔除了，直接 <code>conda create -n py2 python==2.7</code> 会报错说找不到</p><p>而且 Apple Silicon Chip 发布在 python 2.7 EOL 之后</p><p>如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PackagesNotFoundError: The following packages are not available from current channels:</span><br><span class="line"></span><br><span class="line">  - python=2.7</span><br><span class="line"></span><br><span class="line">Current channels:</span><br><span class="line"></span><br><span class="line">  - https://conda.anaconda.org/conda-forge/osx-arm64</span><br><span class="line">  - https://conda.anaconda.org/conda-forge/noarch</span><br><span class="line"></span><br><span class="line"> To search for alternate channels that may provide the conda package you&#x27;re</span><br><span class="line"> looking for, navigate to</span><br><span class="line"></span><br><span class="line">    https://anaconda.org</span><br><span class="line"></span><br><span class="line">and use the search bar at the top of the page.</span><br></pre></td></tr></table></figure><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CONDA_SUBDIR=osx-64 conda create -n py27 python=2.7  # include other packages here</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ensure that future package installs <span class="keyword">in</span> this <span class="built_in">env</span> stick to <span class="string">&#x27;osx-64&#x27;</span></span></span><br><span class="line">conda activate py27</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://stackoverflow.com/questions/67380286/anaconda-channel-for-installing-python-2-7">https://stackoverflow.com/questions/67380286/anaconda-channel-for-installing-python-2-7</a></li><li><a href="https://www.cnblogs.com/suanec/p/15684862.html">https://www.cnblogs.com/suanec/p/15684862.html</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;个别前端项目有使用 node-sass 依赖&lt;/p&gt;
&lt;p&gt;最开始尝试使用 node 16，但是发现无法编译 node-sass&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>macOS Apple Silicon 源码构建 node14</title>
    <link href="https://eric-gitta-moore.github.io/2024/macos-apple-silicon-source-code-builds-node14/"/>
    <id>https://eric-gitta-moore.github.io/2024/macos-apple-silicon-source-code-builds-node14/</id>
    <published>2024-06-07T08:30:00.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>有时项目很多依赖比较老，安装时候需要现场构建，对 node 版本比较敏感。</p><p>虽然可以通过 <code>arch -x86_64 nvm install 14</code> 来安装 x86 架构的 node 版本，但是性能肯定是需要打折扣的（主要是看着不舒服٩(•̤̀ᵕ•̤́๑)ᵒᵏᵎᵎᵎᵎ）</p><h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><blockquote><p>直接用 <code>nvm install -s 14</code> 可以源码安装但是会有 cpp 的报错，<br>究其具体原因大概是因为 arm 和 x86 enum 枚举的长度限制不一导致的<br>这个需要我们用参数忽略掉 <code>-Wno-enum-constexpr-conversion</code><br>但是 nvm 并没有给我们提供修改的能力。所以我们本次直接拉 git source code 构建</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cpp 构建环境自行安装这里不再赘述，不过应该以前就有意无意中安装过，可以在下面执行的时候碰到了报错再说</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/nodejs/node.git</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">cd</span> node</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">git checkout v14.21.3</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">mkdir</span> ~/.nvm/versions/node/v14.21.3</span></span><br></pre></td></tr></table></figure><p>然后需要修改一下文件 <code>vim common.gypi</code> ，大概是这个位置 <a href="https://github.com/nodejs/node/blob/v14.21.3/common.gypi#L498">https://github.com/nodejs/node/blob/v14.21.3/common.gypi#L498</a></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">      [&#x27;OS==&quot;mac&quot;&#x27;, &#123;</span><br><span class="line">        &#x27;defines&#x27;: [&#x27;_DARWIN_USE_64_BIT_INODE=1&#x27;],</span><br><span class="line">        &#x27;xcode_settings&#x27;: &#123;</span><br><span class="line">          &#x27;ALWAYS_SEARCH_USER_PATHS&#x27;: &#x27;NO&#x27;,</span><br><span class="line">          &#x27;GCC_CW_ASM_SYNTAX&#x27;: &#x27;NO&#x27;,                # No -fasm-blocks</span><br><span class="line">          &#x27;GCC_DYNAMIC_NO_PIC&#x27;: &#x27;NO&#x27;,               # No -mdynamic-no-pic</span><br><span class="line">                                                    # (Equivalent to -fPIC)</span><br><span class="line">          &#x27;GCC_ENABLE_CPP_EXCEPTIONS&#x27;: &#x27;NO&#x27;,        # -fno-exceptions</span><br><span class="line">          &#x27;GCC_ENABLE_CPP_RTTI&#x27;: &#x27;NO&#x27;,              # -fno-rtti</span><br><span class="line">          &#x27;GCC_ENABLE_PASCAL_STRINGS&#x27;: &#x27;NO&#x27;,        # No -mpascal-strings</span><br><span class="line">          &#x27;PREBINDING&#x27;: &#x27;NO&#x27;,                       # No -Wl,-prebind</span><br><span class="line">          &#x27;MACOSX_DEPLOYMENT_TARGET&#x27;: &#x27;10.13&#x27;,      # -mmacosx-version-min=10.13</span><br><span class="line">          &#x27;USE_HEADERMAP&#x27;: &#x27;NO&#x27;,</span><br><span class="line">          &#x27;OTHER_CFLAGS&#x27;: [</span><br><span class="line">            &#x27;-fno-strict-aliasing&#x27;,</span><br><span class="line">          ],</span><br><span class="line">          &#x27;WARNING_CFLAGS&#x27;: [</span><br><span class="line">            &#x27;-Wall&#x27;,</span><br><span class="line">            &#x27;-Wendif-labels&#x27;,</span><br><span class="line">            &#x27;-W&#x27;,</span><br><span class="line">            &#x27;-Wno-unused-parameter&#x27;,</span><br><span class="line"><span class="addition">+            &#x27;-Wno-enum-constexpr-conversion&#x27;,</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure><p>然后继续 make &amp; install 就 ok</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">./configure --prefix=`realpth ~/.nvm/versions/node/v14.21.3`</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">make -j `sysctl hw.logicalcpu`</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">make install</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">nvm use 14</span></span><br></pre></td></tr></table></figure><p>最后检查一下版本和架构</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">❯ file `which node`</span><br><span class="line">/Users/admin/.nvm/versions/node/v14.21.3/bin/node: Mach-O 64-bit executable arm64</span><br></pre></td></tr></table></figure><p>coding !</p><p>现在电脑也不卡了，人也精神了 😅😅</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://github.com/nodejs/node/issues/52230#issuecomment-2024353730">https://github.com/nodejs/node/issues/52230#issuecomment-2024353730</a></li><li><a href="https://github.com/nvm-sh/nvm/issues/2218#issuecomment-902697494">https://github.com/nvm-sh/nvm/issues/2218#issuecomment-902697494</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;有时项目很多依赖比较老，安装时候需要现场构建，对 node 版本比较敏感。&lt;/p&gt;
&lt;p&gt;虽然可以通过 &lt;code&gt;arch -x86_64</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>自构建 node 运行 npm 提示 Cannot find module &#39;../lib/utils/unsupported.js&#39;</title>
    <link href="https://eric-gitta-moore.github.io/2024/self-build-node-run-npm-prompt-cannot-find-module-lib-utils-unsupported-js/"/>
    <id>https://eric-gitta-moore.github.io/2024/self-build-node-run-npm-prompt-cannot-find-module-lib-utils-unsupported-js/</id>
    <published>2024-06-07T07:47:42.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>在 macOS 上自行构建的 arm 版本 node 14，并 copy 到 ~&#x2F;.nvm&#x2F;versions&#x2F;node&#x2F;v14.999.999 中</p><h2 id="故障现场"><a href="#故障现场" class="headerlink" title="故障现场"></a>故障现场</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">❯ npm i -g yarn</span><br><span class="line">internal/modules/cjs/loader.js:934</span><br><span class="line">  throw err;</span><br><span class="line">  ^</span><br><span class="line"></span><br><span class="line">Error: Cannot find module &#x27;../lib/utils/unsupported.js&#x27;</span><br><span class="line">Require stack:</span><br><span class="line">- /Users/admin/.nvm/versions/node/v14.999.999/bin/npm</span><br><span class="line">    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:931:15)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:774:27)</span><br><span class="line">    at Module.require (internal/modules/cjs/loader.js:1003:19)</span><br><span class="line">    at require (internal/modules/cjs/helpers.js:107:18)</span><br><span class="line">    at /Users/admin/.nvm/versions/node/v14.999.999/bin/npm:19:21</span><br><span class="line">    at Object.&lt;anonymous&gt; (/Users/admin/.nvm/versions/node/v14.999.999/bin/npm:155:3)</span><br><span class="line">    at Module._compile (internal/modules/cjs/loader.js:1114:14)</span><br><span class="line">    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1143:10)</span><br><span class="line">    at Module.load (internal/modules/cjs/loader.js:979:32)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:819:12) &#123;</span><br><span class="line">  code: &#x27;MODULE_NOT_FOUND&#x27;,</span><br><span class="line">  requireStack: [ &#x27;/Users/admin/.nvm/versions/node/v14.999.999/bin/npm&#x27; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>重新指定 <code>./configure --prefix=</code> 到 <code>~/.nvm/versions/node/v14.999.999</code> 目录，再 <code>make install</code> 即可</p><h2 id="故障原因"><a href="#故障原因" class="headerlink" title="故障原因"></a>故障原因</h2><p>copy 到 .nvm 目录的过程中丢失了软连接，导致 node 寻找依赖的逻辑不符合预期</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[~/.nvm/versions/node/v14.999.999/bin]❯ l</span><br><span class="line">total 136352</span><br><span class="line">drwxr-xr-x  8 admin  staff   256B Jun  5 15:24 .</span><br><span class="line">drwxr-xr-x  6 admin  staff   192B Jun  5 15:25 ..</span><br><span class="line">-rwxr-xr-x  1 admin  staff   600K Jun  5 15:24 corepack</span><br><span class="line">-rwxr-xr-x  1 admin  staff    66M Jun  5 15:24 node</span><br><span class="line">-rwxr-xr-x  1 admin  staff   4.6K Jun  5 15:24 npm</span><br><span class="line">-rwxr-xr-x  1 admin  staff   177B Jun  5 15:24 npx</span><br><span class="line">-rwxr-xr-x  1 admin  staff   8.1K Jun  5 15:24 tnpm</span><br><span class="line">-rwxr-xr-x  1 admin  staff   309B Jun  5 15:24 tnpx</span><br></pre></td></tr></table></figure><p>这个目录正确的应该如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[~/workspace/prebuild-node/v14.21.3/bin]❯ l</span><br><span class="line">total 135096</span><br><span class="line">drwxr-xr-x  8 admin  staff   256B Jun  5 11:23 .</span><br><span class="line">drwxr-xr-x  6 admin  staff   192B Jun  5 11:01 ..</span><br><span class="line">lrwxr-xr-x  1 admin  staff    45B Jun  5 11:01 corepack -&gt; ../lib/node_modules/corepack/dist/corepack.js</span><br><span class="line">-rwxr-xr-x  1 admin  staff    66M Jun  5 11:01 node</span><br><span class="line">lrwxr-xr-x  1 admin  staff    38B Jun  5 11:01 npm -&gt; ../lib/node_modules/npm/bin/npm-cli.js</span><br><span class="line">lrwxr-xr-x  1 admin  staff    38B Jun  5 11:01 npx -&gt; ../lib/node_modules/npm/bin/npx-cli.js</span><br><span class="line">lrwxr-xr-x  1 admin  staff    36B Jun  5 11:23 tnpm -&gt; ../lib/node_modules/tnpm/bin/tnpm.js</span><br><span class="line">lrwxr-xr-x  1 admin  staff    36B Jun  5 11:23 tnpx -&gt; ../lib/node_modules/tnpm/bin/tnpx.js</span><br></pre></td></tr></table></figure><p>node 是通过 realpath 真实路径寻找依赖的，而不是软链接的路径</p><!-- 例如：以 npm 这个命令为例子（版本 v14.21.3） --><p>具体报错代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span> #!<span class="regexp">/usr/</span>bin/env node</span><br><span class="line"> <span class="number">2</span> ;(<span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// wrapper in case we&#x27;re in module_context mode</span></span><br><span class="line"> <span class="number">3</span>   <span class="comment">// windows: running &quot;npm blah&quot; in this folder will invoke WSH, not node.</span></span><br><span class="line"> <span class="number">4</span>   <span class="comment">/* global WScript */</span></span><br><span class="line"> <span class="number">5</span>   <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">WScript</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line"> <span class="number">6</span>     <span class="title class_">WScript</span>.<span class="title function_">echo</span>(</span><br><span class="line"> <span class="number">7</span>       <span class="string">&#x27;npm does not work when run\n&#x27;</span> +</span><br><span class="line"> <span class="number">8</span>         <span class="string">&#x27;with the Windows Scripting Host\n\n&#x27;</span> +</span><br><span class="line"> <span class="number">9</span>         <span class="string">&quot;&#x27;cd&#x27; to a different directory,\n&quot;</span> +</span><br><span class="line"><span class="number">10</span>         <span class="string">&quot;or type &#x27;npm.cmd &lt;args&gt;&#x27;,\n&quot;</span> +</span><br><span class="line"><span class="number">11</span>         <span class="string">&quot;or type &#x27;node npm &lt;args&gt;&#x27;.&quot;</span></span><br><span class="line"><span class="number">12</span>     )</span><br><span class="line"><span class="number">13</span>     <span class="title class_">WScript</span>.<span class="title function_">quit</span>(<span class="number">1</span>)</span><br><span class="line"><span class="number">14</span>     <span class="keyword">return</span></span><br><span class="line"><span class="number">15</span>   &#125;</span><br><span class="line"><span class="number">16</span> </span><br><span class="line"><span class="number">17</span>   process.<span class="property">title</span> = <span class="string">&#x27;npm&#x27;</span></span><br><span class="line"><span class="number">18</span> </span><br><span class="line"><span class="number">19</span>   <span class="keyword">var</span> unsupported = <span class="built_in">require</span>(<span class="string">&#x27;../lib/utils/unsupported.js&#x27;</span>)  <span class="comment">// &lt;&lt;--------------</span></span><br><span class="line"><span class="number">20</span>   unsupported.<span class="title function_">checkForBrokenNode</span>()</span><br></pre></td></tr></table></figure><h2 id="依赖查找原理"><a href="#依赖查找原理" class="headerlink" title="依赖查找原理"></a>依赖查找原理</h2><p>下面以寻找某个依赖 <code>yargs</code> 为例说明</p><p>文件结构</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[~/.nvm/versions/node/v14.999.999]❯ tree -L 5</span><br><span class="line">.</span><br><span class="line">├── bin</span><br><span class="line">│   ├── corepack</span><br><span class="line">│   ├── node</span><br><span class="line">│   ├── npm</span><br><span class="line">│   ├── npx</span><br><span class="line">├── include</span><br><span class="line">│   └── node</span><br><span class="line">├── lib</span><br><span class="line">│   ├── dtrace</span><br><span class="line">│   └── node_modules</span><br><span class="line">│       ├── corepack</span><br><span class="line">│       ├── npm</span><br><span class="line">│       │   ├── AUTHORS</span><br><span class="line">│       │   ├── CHANGELOG.md</span><br><span class="line">│       │   ├── CONTRIBUTING.md</span><br><span class="line">│       │   ├── LICENSE</span><br><span class="line">│       │   ├── Makefile</span><br><span class="line">│       │   ├── README.md</span><br><span class="line">│       │   ├── bin</span><br><span class="line">│       │   ├── changelogs</span><br><span class="line">│       │   ├── configure</span><br><span class="line">│       │   ├── docs</span><br><span class="line">│       │   ├── lib</span><br><span class="line">│       │   ├── make.bat</span><br><span class="line">│       │   ├── man</span><br><span class="line">│       │   ├── node_modules</span><br><span class="line">│       │   │   ├── xtend</span><br><span class="line">│       │   │   ├── y18n</span><br><span class="line">│       │   │   ├── yallist</span><br><span class="line">│       │   │   ├── yargs # &lt;&lt;&lt;---------- 这里是需要找到的目标</span><br><span class="line">│       │   │   └── yargs-parser</span><br><span class="line">│       │   ├── package.json</span><br><span class="line">│       │   ├── scripts</span><br><span class="line">│       │   └── tap-snapshots</span><br><span class="line">└── share</span><br><span class="line">    ├── doc</span><br><span class="line">    ├── man</span><br><span class="line">    └── systemtap</span><br></pre></td></tr></table></figure><p>查找步骤：</p><ol><li><p>寻找依赖 <code>../lib/utils/unsupported.js</code></p></li><li><p>寻找依赖 <code>yargs</code></p></li><li><p>确定文件当前执行文件路径 <code>/User/admin/.nvm/versions/node/v14.999.999/bin/npm</code></p></li><li><p>确定真实路径 <code>realpath /User/admin/.nvm/versions/node/v14.999.999/bin/npm</code>（这里是 shell 命令）</p></li><li><p>迭代寻找 <code>node_modules</code></p></li></ol><ul><li>执行 <code>$(dirname /User/admin/.nvm/versions/node/v14.999.999/bin/npm)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions/node/v14.999.999/bin)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions/node/v14.999.999)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions/node)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li><strong>报错</strong>：<code>Error: Cannot find module &#39;../lib/utils/unsupported.js&#39;</code></li></ul><hr><p>所以说这个软链接是罪魁祸首</p><p>如果有软链接的话，目录结构如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[~/.nvm/versions/node/v14.999.999]❯ tree -L 5</span><br><span class="line">.</span><br><span class="line">├── bin</span><br><span class="line">│   ├── corepack -&gt; ../lib/node_modules/corepack/dist/corepack.js</span><br><span class="line">│   ├── node</span><br><span class="line">│   ├── npm -&gt; ../lib/node_modules/npm/bin/npm-cli.js</span><br><span class="line">│   ├── npx -&gt; ../lib/node_modules/npm/bin/npx-cli.js</span><br><span class="line">├── include</span><br><span class="line">│   └── node</span><br><span class="line">├── lib</span><br><span class="line">│   ├── dtrace</span><br><span class="line">│   └── node_modules</span><br><span class="line">│       ├── corepack</span><br><span class="line">│       ├── npm</span><br><span class="line">│       │   ├── AUTHORS</span><br><span class="line">│       │   ├── CHANGELOG.md</span><br><span class="line">│       │   ├── CONTRIBUTING.md</span><br><span class="line">│       │   ├── LICENSE</span><br><span class="line">│       │   ├── Makefile</span><br><span class="line">│       │   ├── README.md</span><br><span class="line">│       │   ├── bin</span><br><span class="line">│       │   ├── changelogs</span><br><span class="line">│       │   ├── configure</span><br><span class="line">│       │   ├── docs</span><br><span class="line">│       │   ├── lib</span><br><span class="line">│       │   ├── make.bat</span><br><span class="line">│       │   ├── man</span><br><span class="line">│       │   ├── node_modules</span><br><span class="line">│       │   │   ├── xtend</span><br><span class="line">│       │   │   ├── y18n</span><br><span class="line">│       │   │   ├── yallist</span><br><span class="line">│       │   │   ├── yargs # &lt;&lt;&lt;---------- 这里是需要找到的目标</span><br><span class="line">│       │   │   └── yargs-parser</span><br><span class="line">│       │   ├── package.json</span><br><span class="line">│       │   ├── scripts</span><br><span class="line">│       │   └── tap-snapshots</span><br><span class="line">└── share</span><br><span class="line">    ├── doc</span><br><span class="line">    ├── man</span><br><span class="line">    └── systemtap</span><br></pre></td></tr></table></figure><p>查找步骤：</p><ol><li>寻找依赖 <code>yargs</code></li><li>确定文件当前执行文件路径 <code>/User/admin/.nvm/versions/node/v14.999.999/bin/npm</code></li><li>确定真实路径 <code>realpath /User/admin/.nvm/versions/node/v14.999.999/bin/npm</code>（这里是 shell 命令）</li></ol><ul><li>得到真实路径 <code>/User/admin/.nvm/versions/node/v14.999.999/lib/node_modules/npm/bin/npm-cli.js</code></li></ul><ol start="4"><li>迭代寻找 <code>node_modules</code></li></ol><ul><li>执行 <code>$(dirname /User/admin/.nvm/versions/node/v14.999.999/lib/node_modules/npm/bin/npm-cli.js)/node_modules</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions/node/v14.999.999/lib/node_modules/npm/bin)/node_modules</code>（这里是 shell 命令）<ul><li><strong>找到了</strong>：<code>/User/admin/.nvm/versions/node/v14.999.999/lib/node_modules/npm/node_modules</code></li><li>继续找 <code>yargs</code> 包：<code>/User/admin/.nvm/versions/node/v14.999.999/lib/node_modules/npm/node_modules/yargs/package.json</code></li><li>**这里就已经 ok 了，后续是 node 执行的其他流程</li></ul></li></ul><h2 id="回顾问题"><a href="#回顾问题" class="headerlink" title="回顾问题"></a>回顾问题</h2><p>其实这里出问题的只是 <code>require(&#39;../lib/utils/unsupported.js&#39;)</code> 是一个相对路径的文件，查找会比上面更加简单一些</p><p>查找步骤：</p><ol><li>寻找依赖 <code>../lib/utils/unsupported.js</code></li><li>确定文件当前执行文件路径 <code>/User/admin/.nvm/versions/node/v14.999.999/bin/npm</code></li><li>确定真实路径 <code>realpath /User/admin/.nvm/versions/node/v14.999.999/bin/npm</code>（这里是 shell 命令）</li><li>迭代寻找 <code>../lib/utils/unsupported.js</code></li></ol><ul><li>执行 <code>$(dirname /User/admin/.nvm/versions/node/v14.999.999/bin/npm)/../lib/utils/unsupported.js</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions/node/v14.999.999/bin)/../lib/utils/unsupported.js</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions/node/v14.999.999)/../lib/utils/unsupported.js</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions/node)/../lib/utils/unsupported.js</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm/versions)/../lib/utils/unsupported.js</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin/.nvm)/../lib/utils/unsupported.js</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li>执行 <code>$(dirname /User/admin)/../lib/utils/unsupported.js</code>（这里是 shell 命令）<ul><li>没找到</li></ul></li><li><strong>报错</strong>：<code>Error: Cannot find module &#39;../lib/utils/unsupported.js&#39;</code></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>一句话，依赖查找用的是真实路径。</p><p>这也是为什么有时候调试项目的依赖的源码时候会莫名其妙报错，或者出现两个 react 版本的问题</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;在 macOS 上自行构建的 arm 版本 node 14，并 copy 到 ~&amp;#x2F;.nvm&amp;#x2F;versions&amp;#x2F;</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>ipa 签名工具</title>
    <link href="https://eric-gitta-moore.github.io/2024/ipa-sign/"/>
    <id>https://eric-gitta-moore.github.io/2024/ipa-sign/</id>
    <published>2024-05-07T02:32:16.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<ul><li>爱思助手</li><li>Sideloadly</li><li>AltStore</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;爱思助手&lt;/li&gt;
&lt;li&gt;Sideloadly&lt;/li&gt;
&lt;li&gt;AltStore&lt;/li&gt;
&lt;/ul&gt;
</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>Mac OS hosts 文件的锁定保护及修改</title>
    <link href="https://eric-gitta-moore.github.io/2024/lock-protection-and-modification-of-mac-os-hosts-files/"/>
    <id>https://eric-gitta-moore.github.io/2024/lock-protection-and-modification-of-mac-os-hosts-files/</id>
    <published>2024-04-09T13:56:17.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h3 id="锁死hosts文件"><a href="#锁死hosts文件" class="headerlink" title="锁死hosts文件"></a>锁死hosts文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chflags uchg /etc/hosts</span><br><span class="line">sudo chflags schg /etc/hosts</span><br></pre></td></tr></table></figure><h3 id="解锁hosts文件"><a href="#解锁hosts文件" class="headerlink" title="解锁hosts文件"></a>解锁hosts文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chflags -hv noschg /etc/hosts</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;锁死hosts文件&quot;&gt;&lt;a href=&quot;#锁死hosts文件&quot; class=&quot;headerlink&quot; title=&quot;锁死hosts文件&quot;&gt;&lt;/a&gt;锁死hosts文件&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>10 行实现简单 Promise</title>
    <link href="https://eric-gitta-moore.github.io/2024/10-lines-implement-a-simple-promise/"/>
    <id>https://eric-gitta-moore.github.io/2024/10-lines-implement-a-simple-promise/</id>
    <published>2024-02-05T13:37:20.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">        <span class="title function_">fn</span>(<span class="function"><span class="params">value</span>=&gt;</span><span class="variable language_">this</span>.<span class="property">cb</span>?.(value))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">then</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="variable language_">this</span>.<span class="property">cb</span> = <span class="function"><span class="params">val</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">const</span> thenCb = <span class="title function_">fn</span>(val)</span><br><span class="line">            thenCb <span class="keyword">instanceof</span> <span class="title class_">MyPromise</span> ? thenCb.<span class="title function_">then</span>(res) : <span class="title function_">res</span>(thenCb)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line">).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="number">2</span>)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;l</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>PHP &amp; phpenv</title>
    <link href="https://eric-gitta-moore.github.io/2023/php-phpenv/"/>
    <id>https://eric-gitta-moore.github.io/2023/php-phpenv/</id>
    <published>2023-12-03T06:32:34.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<p>PHP &amp; phpenv</p><p>Reference:</p><ul><li><a href="https://github.com/phpbrew/phpbrew/blob/master/README.cn.md">https://github.com/phpbrew/phpbrew/blob/master/README.cn.md</a></li><li><a href="https://blog.csdn.net/Annlix/article/details/119759752">https://blog.csdn.net/Annlix/article/details/119759752</a></li><li><a href="https://github.com/phpbrew/phpbrew/wiki/Variant-Dependencies">https://github.com/phpbrew/phpbrew/wiki/Variant-Dependencies</a></li><li><a href="https://getcomposer.org/download/">https://getcomposer.org/download/</a></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">phpenv Requirement</span></span><br><span class="line">sudo apt-get install \</span><br><span class="line">  build-essential \</span><br><span class="line">  libbz2-dev \</span><br><span class="line">  libreadline-dev \</span><br><span class="line">  libsqlite3-dev \</span><br><span class="line">  libcurl4-gnutls-dev \</span><br><span class="line">  libzip-dev \</span><br><span class="line">  libssl-dev \</span><br><span class="line">  libxml2-dev \</span><br><span class="line">  libxslt-dev \</span><br><span class="line">  libonig-dev \</span><br><span class="line">  php7.4-cli \</span><br><span class="line">  php7.4-bz2 \</span><br><span class="line">  php7.4-xml \</span><br><span class="line">  pkg-config</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install phpenv</span></span><br><span class="line">curl -L -O https://github.com/phpbrew/phpbrew/releases/latest/download/phpbrew.phar</span><br><span class="line">chmod +x phpbrew.phar</span><br><span class="line">sudo mv phpbrew.phar /usr/local/bin/phpbrew</span><br><span class="line">phpbrew init</span><br><span class="line">echo &quot;[[ -e ~/.phpbrew/bashrc ]] &amp;&amp; source ~/.phpbrew/bashrc&quot; &gt;&gt; ~/.zshrc</span><br><span class="line">source ~/.phpbrew/bashrc</span><br><span class="line"></span><br><span class="line">phpbrew update</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Requirement <span class="keyword">for</span> phpbrew everything variant，reference：https://blog.csdn.net/Annlix/article/details/119759752</span></span><br><span class="line">sudo apt install libsystemd-dev libacl1-dev libapparmor-dev valgrind libdmalloc-dev systemtap-sdt-dev krb5-multidev libkrb5-dev libssl-dev libsqlite3-dev libbz2-dev libcurl4-openssl-dev libenchant-2-dev libgmp-dev libc-client2007e-dev libldap2-dev libsasl2-dev libonig-dev unixodbc-dev libpspell-dev libedit-dev libsnmp-dev libsodium-dev libargon2-dev libtidy-dev libzip-dev libwebp-dev</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gd</span></span><br><span class="line">sudo apt-get install libjpeg8-dev libpng-dev libfreetype6-dev</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">pgsql</span></span><br><span class="line">sudo apt install libpq-dev</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">build php</span></span><br><span class="line">phpbrew install -j $(nproc) 7.3 +default +dbs +mb +fpm +gd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">phpbrew switch 7.3.xx</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">composer</span></span><br><span class="line">php -r &quot;copy(&#x27;https://getcomposer.org/installer&#x27;, &#x27;composer-setup.php&#x27;);&quot;</span><br><span class="line">php -r &quot;if (hash_file(&#x27;sha384&#x27;, &#x27;composer-setup.php&#x27;) === &#x27;e21205b207c3ff031906575712edab6f13eb0b361f2085f1f1237b7126d785e826a450292b6cfd1d64d92e6563bbde02&#x27;) &#123; echo &#x27;Installer verified&#x27;; &#125; else &#123; echo &#x27;Installer corrupt&#x27;; unlink(&#x27;composer-setup.php&#x27;); &#125; echo PHP_EOL;&quot;</span><br><span class="line">php composer-setup.php</span><br><span class="line">php -r &quot;unlink(&#x27;composer-setup.php&#x27;);&quot;</span><br><span class="line"></span><br><span class="line">sudo mv composer.phar /usr/local/bin/composer</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;PHP &amp;amp; phpenv&lt;/p&gt;
&lt;p&gt;Reference:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/phpbrew/phpbrew/blob/master/README.cn.md&quot;&gt;https://github.com/</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>浪潮M2220主板加NVME BIOS</title>
    <link href="https://eric-gitta-moore.github.io/2023/inspur-m2220-motherboard-with-nvme-bios/"/>
    <id>https://eric-gitta-moore.github.io/2023/inspur-m2220-motherboard-with-nvme-bios/</id>
    <published>2023-12-02T04:27:11.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<p>浪潮M2220主板加NVME BIOS</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── 111.mp4</span><br><span class="line">├── 222.mp4</span><br><span class="line">├── LICENSE</span><br><span class="line">├── README.md</span><br><span class="line">├── 刷机前先看视频.txt</span><br><span class="line">├── 微信图片_20230910154327.jpg</span><br><span class="line">├── 微信图片_20230910154335.jpg</span><br><span class="line">├── 微信图片_20230910154341.jpg</span><br><span class="line">├── 微信图片_20231014083224.jpg</span><br><span class="line">├── 微信图片_20231014083235.jpg</span><br><span class="line">├── 浪潮NF5270M3 主板BIOS 原版提取无修改</span><br><span class="line">│   └── AmericanMegatrendsInc.-2.1.11.rom</span><br><span class="line">├── 浪潮nf5270m3带nvme</span><br><span class="line">│   ├── 1.rom</span><br><span class="line">│   ├── AFUWINGUIx64.EXE</span><br><span class="line">│   ├── AFUWINx64.EXE</span><br><span class="line">│   ├── AMI_Aptio_AFU_User_Guide_NDA.pdf</span><br><span class="line">│   ├── amifldrv64.sys</span><br><span class="line">│   ├── readme.txt</span><br><span class="line">│   └── win.bat</span><br><span class="line">└── 浪潮nf5270m3带nvme.7z</span><br><span class="line"></span><br><span class="line">2 directories, 19 files</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/eric-gitta-moore/eric-gitta-moore.github.io/main/static/images/17014912290411701491228172.png" alt="17014912290411701491228172.png"></p><p><img src="https://raw.githubusercontent.com/eric-gitta-moore/eric-gitta-moore.github.io/main/static/images/17014912430411701491242486.png" alt="17014912430411701491242486.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;浪潮M2220主板加NVME BIOS&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;li</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>mac font pingfang download</title>
    <link href="https://eric-gitta-moore.github.io/2023/mac-font-pingfang/"/>
    <id>https://eric-gitta-moore.github.io/2023/mac-font-pingfang/</id>
    <published>2023-12-02T04:19:11.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>19.0d4e2 版本的苹方可以直接被 Windows 识别，估计是华康在导出文件的时候忘了设置什么东西。</p><p>出处：<a href="https://blog.dsrkafuu.net/post/2020/extract-sf-pingfang/">https://blog.dsrkafuu.net/post/2020/extract-sf-pingfang/</a></p></blockquote><p>我用lanzou备份一份</p><p><a href="https://yunling.lanzout.com/iiKti144mgra">https://yunling.lanzout.com/iiKti144mgra</a></p><p>release 也发了一份</p><p><a href="https://github.com/eric-gitta-moore/macOS-font/releases/download/font/PingFang.19.0d4e2.ttc">https://github.com/eric-gitta-moore/macOS-font/releases/download/font/PingFang.19.0d4e2.ttc</a></p><p>sha1: A3104073F3CC498BB5D7F38DB91926F9DA9CA437</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;19.0d4e2 版本的苹方可以直接被 Windows 识别，估计是华康在导出文件的时候忘了设置什么东西。&lt;/p&gt;
&lt;p&gt;出处：&lt;a href=&quot;https://blog.dsrkafuu.net/post/2020/extract-sf-ping</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>VB-CABLE A+B Driver Pack 43</title>
    <link href="https://eric-gitta-moore.github.io/2023/vbcable-a-b-driver-pack-43/"/>
    <id>https://eric-gitta-moore.github.io/2023/vbcable-a-b-driver-pack-43/</id>
    <published>2023-11-22T11:36:28.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<p>VBCABLE_A_B_Driver_Pack43.zip</p><p><a href="https://archive.org/details/vbcable-a-b-driver-pack-43">https://archive.org/details/vbcable-a-b-driver-pack-43</a></p><iframe src="https://archive.org/embed/vbcable-a-b-driver-pack-43" width="560" height="384" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;VBCABLE_A_B_Driver_Pack43.zip&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://archive.org/details/vbcable-a-b-driver-pack-43&quot;&gt;https://archive.org/details/vbcable</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>angular 绕弯实现 react 动态组件传值解构透传方法</title>
    <link href="https://eric-gitta-moore.github.io/2023/angular-bending-method-for-realizing-dynamic-component-value-transmission-deconstructing-and-transparent-transmission-in-react/"/>
    <id>https://eric-gitta-moore.github.io/2023/angular-bending-method-for-realizing-dynamic-component-value-transmission-deconstructing-and-transparent-transmission-in-react/</id>
    <published>2023-11-19T14:01:26.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<p>angular 绕弯实现 react 动态组件传值解构透传方法</p><p>实现：<code>hoc.component.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AfterViewInit</span>, <span class="title class_">Component</span>, <span class="title class_">Input</span>, <span class="title class_">Type</span>, <span class="title class_">ViewChild</span>, <span class="title class_">ViewContainerRef</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-hoc&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">` &lt;ng-template #hoc /&gt;`</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">HocComponent</span> <span class="keyword">implements</span> <span class="title class_">AfterViewInit</span> &#123;</span><br><span class="line">  <span class="meta">@ViewChild</span>(<span class="string">&#x27;hoc&#x27;</span>, &#123; <span class="attr">read</span>: <span class="title class_">ViewContainerRef</span> &#125;)</span><br><span class="line">  <span class="keyword">private</span> container!: <span class="title class_">ViewContainerRef</span>;</span><br><span class="line">  <span class="meta">@Input</span>()</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">Type</span>&lt;<span class="title class_">Component</span>&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="meta">@Input</span>()</span><br><span class="line">  <span class="attr">options</span>: <span class="built_in">unknown</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">ngAfterViewInit</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">component</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;this.component can not be undefined&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> ref = <span class="variable language_">this</span>.<span class="property">container</span>.<span class="title function_">createComponent</span>(<span class="variable language_">this</span>.<span class="property">component</span>);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">options</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(ref.<span class="property">instance</span>, <span class="variable language_">this</span>.<span class="property">options</span>);</span><br><span class="line">    ref.<span class="property">changeDetectorRef</span>.<span class="title function_">detectChanges</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用法：<code>home.component.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">app-hoc</span> [<span class="attr">component</span>]=<span class="string">&quot;component&quot;</span> [<span class="attr">options</span>]=<span class="string">&quot;options&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;angular 绕弯实现 react 动态组件传值解构透传方法&lt;/p&gt;
&lt;p&gt;实现：&lt;code&gt;hoc.component.ts&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight ts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>短小且优雅的Promise并发控制实现</title>
    <link href="https://eric-gitta-moore.github.io/2023/short-and-elegant-implementation-of-promise-concurrency-control/"/>
    <id>https://eric-gitta-moore.github.io/2023/short-and-elegant-implementation-of-promise-concurrency-control/</id>
    <published>2023-11-09T14:02:31.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<p>参考 <code>p-limit</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pLimit</span>(<span class="params">concurrent</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> task = [], active = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">fn</span> =&gt;</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        task.<span class="title function_">push</span>(<span class="keyword">async</span> () =&gt; (active++, <span class="title function_">res</span>(<span class="keyword">await</span> <span class="title function_">fn</span>()), active--, task.<span class="title function_">pop</span>()?.()));</span><br><span class="line">        active &lt; concurrent &amp;&amp; task.<span class="title function_">pop</span>()?.();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> limit = <span class="title function_">pLimit</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fetchSome</span> = size =&gt; <span class="title function_">fetch</span>(<span class="string">`https://speed.cloudflare.com/__down?bytes=<span class="subst">$&#123;size&#125;</span>`</span>)</span><br><span class="line"><span class="keyword">const</span> input = [</span><br><span class="line"><span class="title function_">limit</span>(<span class="function">() =&gt;</span> (<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>), <span class="title function_">fetchSome</span>(<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">3</span>))),</span><br><span class="line"><span class="title function_">limit</span>(<span class="function">() =&gt;</span> (<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">8</span>), <span class="title function_">fetchSome</span>(<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">8</span>))),</span><br><span class="line"><span class="title function_">limit</span>(<span class="function">() =&gt;</span> (<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>), <span class="title function_">fetchSome</span>(<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">1</span>))),</span><br><span class="line"><span class="title function_">limit</span>(<span class="function">() =&gt;</span> (<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">0.1</span>), <span class="title function_">fetchSome</span>(<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">0.1</span>))),</span><br><span class="line"><span class="title function_">limit</span>(<span class="function">() =&gt;</span> (<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>), <span class="title function_">fetchSome</span>(<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">2</span>))),</span><br><span class="line"><span class="title function_">limit</span>(<span class="function">() =&gt;</span> (<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">10</span>), <span class="title function_">fetchSome</span>(<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">10</span>))),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Only one promise is run at once</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(input);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;参考 &lt;code&gt;p-limit&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;l</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>macOS 14 不插电实现合盖外接显示器</title>
    <link href="https://eric-gitta-moore.github.io/2023/macos-14-achieves-closed-external-display-without-plugging-in/"/>
    <id>https://eric-gitta-moore.github.io/2023/macos-14-achieves-closed-external-display-without-plugging-in/</id>
    <published>2023-10-06T03:52:47.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<p>mac 默认拔掉电源线后，系统进入休眠，不能正常使用外接显示器。</p><p>系统设置中不提供解决方案，直接终端输入如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启用拔线不休眠</span></span><br><span class="line">sudo pmset -a <span class="built_in">sleep</span> 0</span><br><span class="line">sudo pmset -a hibernatemode 0</span><br><span class="line">sudo pmset -a disablesleep 1</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 还原</span></span><br><span class="line">sudo pmset -a <span class="built_in">sleep</span> 1</span><br><span class="line">sudo pmset -a hibernatemode 3</span><br><span class="line">sudo pmset -a disablesleep 0</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;mac 默认拔掉电源线后，系统进入休眠，不能正常使用外接显示器。&lt;/p&gt;
&lt;p&gt;系统设置中不提供解决方案，直接终端输入如下：&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span </summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>NDI HX Camera apk | NewTek NDI apk</title>
    <link href="https://eric-gitta-moore.github.io/2023/ndi-hx-camera-apk-newtek-ndi-apk/"/>
    <id>https://eric-gitta-moore.github.io/2023/ndi-hx-camera-apk-newtek-ndi-apk/</id>
    <published>2023-09-28T06:03:32.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<p>Google Play: <a href="https://play.google.com/store/apps/details?id=com.newtek.ndi.hxcam">https://play.google.com/store/apps/details?id=com.newtek.ndi.hxcam</a></p><p>官方的NDI®相机。将您的手机或平板电脑变成实时视频制作相机。</p><p>NDI®（网络设备接口）是一种低延迟IP视频协议，专门为专业现场视频制作而开发，并得到许多制造商广泛的广播系统的支持。</p><p>NDI®HX相机将您的Android影像设备变成高质量的无线视音频源，用于同一网络上启用NDI的广播系统和软件。与NDI®工具（ndi.tv&#x2F;tools）结合使用时，支持NDI *的视频系统会自动识别您设备的输出，可以将其混入现场表演中，甚至还可以用作网络摄像机。</p><p>*注意：需要支持NDI v.4或更高版本。</p><p>基本特征<br>• 易于使用<br>•前置&#x2F;后置摄像头选择<br>•自动对焦，自动对焦锁或点按进行对焦<br>•自动曝光，自动曝光锁<br>•手动曝光补偿<br>•灯开&#x2F;关（在支持设备上）<br>•音频静音<br>•可选的网格覆盖</p><p>高级功能<br>•HI带宽（最高4K），中（最高1080p）和标准（640x480）模式<br>•简单的捏缩放<br>•自动NDI设备识别<br>•连接通知和提示（广播&#x2F;预览）显示</p><p>支持<br>•NDI论坛<a href="https://forums.newtek.com/forumdisplay.php/360-NDI-%28Network-Device-Interface%29">https://forums.newtek.com/forumdisplay.php/360-NDI-%28Network-Device-Interface%29</a></p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><ul><li><a href="https://github.com/eric-gitta-moore/attachment/releases/download/ndi/NDI.HX.Camera_1.28.apk">https://github.com/eric-gitta-moore/attachment/releases/download/ndi/NDI.HX.Camera_1.28.apk</a></li><li><a href="https://github.com/eric-gitta-moore/attachment/releases/download/ndi/NewTek.NDI_1.1.apk">https://github.com/eric-gitta-moore/attachment/releases/download/ndi/NewTek.NDI_1.1.apk</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Google Play: &lt;a href=&quot;https://play.google.com/store/apps/details?id=com.newtek.ndi.hxcam&quot;&gt;https://play.google.com/store/apps/details?id=c</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>miniconda &amp; cuda &amp; pytorch</title>
    <link href="https://eric-gitta-moore.github.io/2023/miniconda-cuda-pytorch/"/>
    <id>https://eric-gitta-moore.github.io/2023/miniconda-cuda-pytorch/</id>
    <published>2023-09-24T02:37:57.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="miniconda"><a href="#miniconda" class="headerlink" title="miniconda"></a>miniconda</h2><p>Reference：</p><ul><li><a href="https://docs.conda.io/projects/miniconda/en/latest/miniconda-other-installer-links.html">https://docs.conda.io/projects/miniconda/en/latest/miniconda-other-installer-links.html</a></li><li><a href="https://docs.conda.io/projects/miniconda/en/latest/">https://docs.conda.io/projects/miniconda/en/latest/</a></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/miniconda3</span><br><span class="line">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh</span><br><span class="line">bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3</span><br><span class="line"><span class="built_in">rm</span> -rf ~/miniconda3/miniconda.sh</span><br></pre></td></tr></table></figure><p>安装后，初始化新安装的 Miniconda。以下命令针对 bash 和 zsh shell 进行初始化：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/miniconda3/bin/conda init bash</span><br><span class="line">~/miniconda3/bin/conda init zsh</span><br></pre></td></tr></table></figure><h2 id="cuda-toolkit（可选）"><a href="#cuda-toolkit（可选）" class="headerlink" title="cuda toolkit（可选）"></a>cuda toolkit（可选）</h2><p>Reference：</p><ul><li><a href="https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/gpu-compute">https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/gpu-compute</a></li><li><a href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html#cuda-support-for-wsl-2">https://docs.nvidia.com/cuda/wsl-user-guide/index.html#cuda-support-for-wsl-2</a></li><li><a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&Distribution=WSL-Ubuntu&target_version=2.0&target_type=runfile_local">https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=WSL-Ubuntu&amp;target_version=2.0&amp;target_type=runfile_local</a></li></ul><p>如果需要编译 CUDA 程序那么这一步是必选</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line">wget https://developer.download.nvidia.com/compute/cuda/12.2.2/local_installers/cuda_12.2.2_535.104.05_linux.run</span><br><span class="line">sudo sh cuda_12.2.2_535.104.05_linux.run</span><br></pre></td></tr></table></figure><h2 id="pdm"><a href="#pdm" class="headerlink" title="pdm"></a>pdm</h2><p>Reference:</p><ul><li><a href="https://pdm.fming.dev/latest/#installation">https://pdm.fming.dev/latest/#installation</a></li></ul><p>确保 conda 已经激活</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=$PATH:$HOME/.local/bin&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=$PATH:$HOME/.local/bin&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"></span><br><span class="line">python3 -m pip install --user pipx</span><br><span class="line">pipx install pdm[all]</span><br></pre></td></tr></table></figure><h2 id="pytorch"><a href="#pytorch" class="headerlink" title="pytorch"></a>pytorch</h2><p>Reference:</p><ul><li><a href="https://pytorch.org/get-started/locally/">https://pytorch.org/get-started/locally/</a></li><li><a href="https://pytorch.org/get-started/locally/#windows-verification">https://pytorch.org/get-started/locally/#windows-verification</a></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118</span><br></pre></td></tr></table></figure><h2 id="kaggle-cli"><a href="#kaggle-cli" class="headerlink" title="kaggle cli"></a>kaggle cli</h2><p>Reference:</p><ul><li><a href="https://www.kaggle.com/docs/api">https://www.kaggle.com/docs/api</a></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pip install kaggle</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开 https://www.kaggle.com/settings</span></span><br><span class="line"><span class="comment"># 下载 kaggle.json，上传到 ~/.kaggle/kaggle.json</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> 0644 ~/.kaggle/kaggle.json</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;miniconda&quot;&gt;&lt;a href=&quot;#miniconda&quot; class=&quot;headerlink&quot; title=&quot;miniconda&quot;&gt;&lt;/a&gt;miniconda&lt;/h2&gt;&lt;p&gt;Reference：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://d</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>Ubuntu Setup 总结</title>
    <link href="https://eric-gitta-moore.github.io/2023/ubuntu-setup-summary/"/>
    <id>https://eric-gitta-moore.github.io/2023/ubuntu-setup-summary/</id>
    <published>2023-09-24T02:37:57.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>以下内容只针对于 Ubuntu&#x2F;Debian，推荐使用 Ubuntu Jammy 或者 Ubuntu Focal</p></blockquote><ol><li><a href="/2023/ubuntu-switching-summary/">换源</a></li><li><a href="/2023/zsh-install-powerlevel10k-install-the-p10k-plug-in/">zsh &amp; powerlevel10k</a></li><li><a href="/2023/sogou-input-method-chinese-pinyin-is-installed-in-wsl/">语言包 &amp; 搜狗输入法</a></li><li>cpp: run <code>sudo apt install build-essential -y</code></li><li><a href="/2023/miniconda-cuda-pytorch/">miniconda &amp; cuda &amp; pytorch</a></li><li>nvm &amp; node<br>Reference:</li></ol><ul><li><a href="https://github.com/nvm-sh/nvm#installing-and-updating">https://github.com/nvm-sh/nvm#installing-and-updating</a></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash</span><br></pre></td></tr></table></figure><ol start="7"><li>java &amp; jenv</li></ol><p>Reference:</p><ul><li><a href="https://mirror.nju.edu.cn/mirrorz-help/Adoptium/">https://mirror.nju.edu.cn/mirrorz-help/Adoptium/</a></li><li><a href="https://github.com/jenv/jenv#1-getting-started">https://github.com/jenv/jenv#1-getting-started</a></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># java</span></span><br><span class="line">sudo apt-get update &amp;&amp; sudo apt-get install -y wget apt-transport-https</span><br><span class="line">sudo <span class="built_in">mkdir</span> /etc/apt/keyrings/</span><br><span class="line">sudo wget -O /etc/apt/keyrings/adoptium.asc https://packages.adoptium.net/artifactory/api/gpg/key/public</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/etc/apt/keyrings/adoptium.asc] https://mirrors.tuna.tsinghua.edu.cn/Adoptium/deb <span class="subst">$(awk -F= &#x27;/^VERSION_CODENAME/&#123;print$2&#125;&#x27; /etc/os-release)</span> main&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/adoptium.list</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install temurin-8-jdk temurin-11-jdk temurin-17-jdk</span><br><span class="line"></span><br><span class="line"><span class="comment"># jenv</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/jenv/jenv.git ~/.jenv</span><br><span class="line"><span class="comment"># Shell: bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;eval &quot;$(jenv init -)&quot;&#x27;</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"><span class="comment"># Shell: zsh</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;eval &quot;$(jenv init -)&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启 shell &amp; 添加 java 版本</span></span><br><span class="line"><span class="built_in">dirname</span> $(<span class="built_in">dirname</span> $(<span class="built_in">readlink</span> -f $(<span class="built_in">which</span> java)))</span><br><span class="line">jenv add <span class="string">&quot;<span class="subst">$(dirname $(dirname $(readlink -f $(which java)</span>)))&quot;</span></span><br><span class="line"></span><br><span class="line">jenv versions</span><br><span class="line"></span><br><span class="line">jenv global 11</span><br></pre></td></tr></table></figure><p>8、PHP &amp; phpenv</p><p>用 <code>phpstudy</code> 或者 <code>宝塔</code> 吧，编译要搞死人</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;以下内容只针对于 Ubuntu&amp;#x2F;Debian，推荐使用 Ubuntu Jammy 或者 Ubuntu Focal&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;/2023/ubuntu-switching-sum</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>Ubuntu 换源总结</title>
    <link href="https://eric-gitta-moore.github.io/2023/ubuntu-switching-summary/"/>
    <id>https://eric-gitta-moore.github.io/2023/ubuntu-switching-summary/</id>
    <published>2023-09-24T02:21:54.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i.bak <span class="string">&#x27;s/archive.ubuntu.com/mirrors.cernet.edu.cn/g&#x27;</span> /etc/apt/sources.list</span><br><span class="line">sudo sed -i <span class="string">&#x27;s/security.ubuntu.com/mirrors.cernet.edu.cn/g&#x27;</span> /etc/apt/sources.list</span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><h2 id="pdm"><a href="#pdm" class="headerlink" title="pdm"></a>pdm</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pdm config pypi.url https://mirrors.cernet.edu.cn/pypi/web/simple</span><br></pre></td></tr></table></figure><h2 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config <span class="built_in">set</span> global.index-url https://mirrors.cernet.edu.cn/pypi/web/simple</span><br></pre></td></tr></table></figure><h2 id="conda"><a href="#conda" class="headerlink" title="conda"></a>conda</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">&#x27;EOF&#x27;</span> &gt; ~/.condarc</span><br><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: <span class="literal">true</span></span><br><span class="line">default_channels:</span><br><span class="line">  - https://mirrors.cernet.edu.cn/anaconda/pkgs/main</span><br><span class="line">  - https://mirrors.cernet.edu.cn/anaconda/pkgs/r</span><br><span class="line">  - https://mirrors.cernet.edu.cn/anaconda/pkgs/msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https://mirrors.cernet.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch: https://mirrors.cernet.edu.cn/anaconda/cloud</span><br><span class="line">  nvidia: https://mirrors.sustech.edu.cn/anaconda-extra/cloud</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">conda clean -i</span><br></pre></td></tr></table></figure><h2 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://repo.nju.edu.cn/repository/npm/</span><br><span class="line">yarn config <span class="built_in">set</span> registry https://repo.nju.edu.cn/repository/npm/</span><br><span class="line">pnpm config <span class="built_in">set</span> registry https://repo.nju.edu.cn/repository/npm/</span><br></pre></td></tr></table></figure><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://mirror.nju.edu.cn/">https://mirror.nju.edu.cn/</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;apt&quot;&gt;&lt;a href=&quot;#apt&quot; class=&quot;headerlink&quot; title=&quot;apt&quot;&gt;&lt;/a&gt;apt&lt;/h2&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>zsh 安装 powerlevel10k 安装 p10k 插件</title>
    <link href="https://eric-gitta-moore.github.io/2023/zsh-install-powerlevel10k-install-the-p10k-plug-in/"/>
    <id>https://eric-gitta-moore.github.io/2023/zsh-install-powerlevel10k-install-the-p10k-plug-in/</id>
    <published>2023-09-24T02:14:10.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># zsh</span></span><br><span class="line">sudo apt install zsh</span><br><span class="line">chsh -s $(<span class="built_in">which</span> zsh)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ohmyzsh</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># p10k</span></span><br><span class="line">git <span class="built_in">clone</span> --depth=1 https://github.com/romkatv/powerlevel10k.git <span class="variable">$&#123;ZSH_CUSTOM:-<span class="variable">$HOME</span>/.oh-my-zsh/custom&#125;</span>/themes/powerlevel10k</span><br><span class="line">sed -i <span class="string">&#x27;s#robbyrussell#powerlevel10k/powerlevel10k#&#x27;</span> ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># plugin</span></span><br><span class="line">sed -i <span class="string">&#x27;s/plugins=(git)/\</span></span><br><span class="line"><span class="string">plugins=( \</span></span><br><span class="line"><span class="string">  git \</span></span><br><span class="line"><span class="string">  command-not-found \</span></span><br><span class="line"><span class="string">  colored-man-pages \</span></span><br><span class="line"><span class="string">  vi-mode \</span></span><br><span class="line"><span class="string">  zsh-autosuggestions \</span></span><br><span class="line"><span class="string">  zsh-syntax-highlighting \</span></span><br><span class="line"><span class="string">)/&#x27;</span> ~/.zshrc</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br><span class="line"></span><br><span class="line"><span class="comment"># z.lua</span></span><br><span class="line">sudo apt install -y lua5.2</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/skywind3000/z.lua.git ~/.z.lua</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;eval &quot;$(lua ~/.z.lua/z.lua  --init zsh once enhanced)&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启 zsh 并配置 p10k</span></span><br><span class="line"><span class="built_in">exec</span> zsh</span><br></pre></td></tr></table></figure><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://ohmyz.sh/#install">https://ohmyz.sh/#install</a></li><li><a href="https://github.com/ohmyzsh/ohmyzsh/wiki/Installing-ZSH">https://github.com/ohmyzsh/ohmyzsh/wiki/Installing-ZSH</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Install&quot;&gt;&lt;a href=&quot;#Install&quot; class=&quot;headerlink&quot; title=&quot;Install&quot;&gt;&lt;/a&gt;Install&lt;/h2&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gu</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>WSL 中安装搜狗输入法 中文拼音</title>
    <link href="https://eric-gitta-moore.github.io/2023/sogou-input-method-chinese-pinyin-is-installed-in-wsl/"/>
    <id>https://eric-gitta-moore.github.io/2023/sogou-input-method-chinese-pinyin-is-installed-in-wsl/</id>
    <published>2023-09-23T13:17:56.000Z</published>
    <updated>2024-06-07T10:22:27.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="配置语言包"><a href="#配置语言包" class="headerlink" title="配置语言包"></a>配置语言包</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sudo locale-gen en_US.UTF-8 zh_CN.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">&#x27;EOF&#x27;</span> | sudo <span class="built_in">tee</span> -a /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LANG=en_US.UTF-8</span><br><span class="line"><span class="built_in">export</span> LANGUAGE=en_US.UTF-8</span><br><span class="line"><span class="comment"># export LANGUAGE=en_US.UTF-8:zh_CN.UTF-8</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;source /etc/profile&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加 MesloLGS 字体</span></span><br><span class="line">sudo <span class="built_in">mkdir</span> /usr/share/fonts/myfont</span><br><span class="line"><span class="built_in">cd</span> /usr/share/fonts/myfont</span><br><span class="line">sudo wget https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Regular.ttf</span><br><span class="line">sudo wget https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold.ttf</span><br><span class="line">sudo wget https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Italic.ttf</span><br><span class="line">sudo wget https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold%20Italic.ttf</span><br></pre></td></tr></table></figure><h2 id="配置字体"><a href="#配置字体" class="headerlink" title="配置字体"></a>配置字体</h2><p>添加 Windows 字体，并设置微软雅黑字体优先级</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fontconfig</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">&#x27;EOF&#x27;</span> | sudo <span class="built_in">tee</span> /etc/fonts/local.conf</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE fontconfig SYSTEM <span class="string">&quot;urn:fontconfig:fonts.dtd&quot;</span>&gt;</span><br><span class="line">&lt;fontconfig&gt;</span><br><span class="line">  &lt;<span class="built_in">dir</span>&gt;/mnt/c/Windows/Fonts&lt;/dir&gt;</span><br><span class="line">&lt;<span class="built_in">alias</span>&gt;</span><br><span class="line">&lt;family&gt;serif&lt;/family&gt;</span><br><span class="line">&lt;prefer&gt;</span><br><span class="line">&lt;family&gt;Microsoft YaHei UI&lt;/family&gt;&lt;!-- han (zh-cn) --&gt;</span><br><span class="line">&lt;/prefer&gt;</span><br><span class="line">&lt;/alias&gt;</span><br><span class="line">&lt;<span class="built_in">alias</span>&gt;</span><br><span class="line">&lt;family&gt;sans-serif&lt;/family&gt;</span><br><span class="line">&lt;prefer&gt;</span><br><span class="line">&lt;family&gt;Microsoft YaHei UI&lt;/family&gt;&lt;!-- han (zh-cn) --&gt;</span><br><span class="line">&lt;/prefer&gt;</span><br><span class="line">&lt;/alias&gt;</span><br><span class="line">&lt;<span class="built_in">alias</span>&gt;</span><br><span class="line">&lt;family&gt;monospace&lt;/family&gt;</span><br><span class="line">&lt;prefer&gt;</span><br><span class="line">&lt;family&gt;Microsoft YaHei UI&lt;/family&gt;&lt;!-- han (zh-cn) --&gt;</span><br><span class="line">&lt;/prefer&gt;</span><br><span class="line">&lt;/alias&gt;</span><br><span class="line">&lt;<span class="built_in">alias</span>&gt;</span><br><span class="line">&lt;family&gt;system-ui&lt;/family&gt;</span><br><span class="line">&lt;prefer&gt;</span><br><span class="line">&lt;family&gt;Microsoft YaHei UI&lt;/family&gt;&lt;!-- han (zh-cn) --&gt;</span><br><span class="line">&lt;/prefer&gt;</span><br><span class="line">&lt;/alias&gt;</span><br><span class="line"></span><br><span class="line">&lt;/fontconfig&gt;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">sudo fc-cache -f -v</span><br></pre></td></tr></table></figure><h2 id="配置-fcitx"><a href="#配置-fcitx" class="headerlink" title="配置 fcitx"></a>配置 fcitx</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fcitx</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">&#x27;EOF&#x27;</span> | sudo <span class="built_in">tee</span> -a /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=@im=fcitx</span><br><span class="line"><span class="built_in">export</span> DefaultIMModule=fcitx</span><br><span class="line">fcitx-autostart &amp;&gt;/dev/null</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h2 id="配置搜狗输入法"><a href="#配置搜狗输入法" class="headerlink" title="配置搜狗输入法"></a>配置搜狗输入法</h2><p>下载搜狗输入法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget  -O /tmp/so.deb 搜狗输入法下载地址</span><br><span class="line"></span><br><span class="line">sudo apt install /tmp/so.deb</span><br></pre></td></tr></table></figure><p>下载依赖</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libqt5qml5 libqt5quick5 libqt5quickwidgets5 qml-module-qtquick2</span><br><span class="line"></span><br><span class="line">sudo apt install libgsettings-qt1</span><br></pre></td></tr></table></figure><h2 id="启用输入法"><a href="#启用输入法" class="headerlink" title="启用输入法"></a>启用输入法</h2><p>重启 wsl，然后</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fcitx-config-gtk3</span><br></pre></td></tr></table></figure><p><img src="https://shurufa.sogou.com/_next/image?url=/_next/static/media/help15.c14aafcd.png&w=1080&q=75" alt="1.jpeg"></p><p><img src="https://shurufa.sogou.com/_next/image?url=/_next/static/media/help16.e32b0f4a.png&w=1080&q=75" alt="2"></p><h2 id="试用"><a href="#试用" class="headerlink" title="试用"></a>试用</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gedit</span><br><span class="line">gedit</span><br></pre></td></tr></table></figure><p>ctrl + space 切换输入法，这里和 Windows 的冲突了，记得关掉 Windows 的，也最好换掉 WSL 的输入法切换，因为这个快捷键和 idea 的自动补全快捷键冲突了</p><h2 id="测试微软雅黑是否生效"><a href="#测试微软雅黑是否生效" class="headerlink" title="测试微软雅黑是否生效"></a>测试微软雅黑是否生效</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/oldj/SwitchHosts/releases/download/v4.1.2/SwitchHosts_linux_x86_64_4.1.2.6086.AppImage -O /tmp/switch.AppImage</span><br><span class="line">sudo <span class="built_in">chmod</span> +x /tmp/switch.AppImage</span><br><span class="line">/tmp/switch.AppImage</span><br></pre></td></tr></table></figure><p>打开切换中文，打开开发者工具，切换到 <code>computed style</code> 观察使用的字体是否为微软雅黑</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://monkeywie.cn/2021/09/26/wsl2-gui-idea-config/">https://monkeywie.cn/2021/09/26/wsl2-gui-idea-config/</a></li><li><a href="https://shurufa.sogou.com/linux/guide--">https://shurufa.sogou.com/linux/guide--</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;配置语言包&quot;&gt;&lt;a href=&quot;#配置语言包&quot; class=&quot;headerlink&quot; title=&quot;配置语言包&quot;&gt;&lt;/a&gt;配置语言包&lt;/h2&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p</summary>
      
    
    
    
    <category term="默认" scheme="https://eric-gitta-moore.github.io/categories/%E9%BB%98%E8%AE%A4/"/>
    
    
  </entry>
  
</feed>
