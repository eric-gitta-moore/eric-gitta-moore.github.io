<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>OpenStack Kolla-Ansible部署Swift文件存储 对接Ceph RadosGW，Proxmox | James Curtis</title><link rel="stylesheet" type="text/css" href="/en/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/en/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/en/favicon.ico"><link rel="apple-touch-icon" href="/en/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/en/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/en/atom.xml"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">OpenStack Kolla-Ansible部署Swift文件存储 对接Ceph RadosGW，Proxmox</h1><a id="logo" href="/en/.">James Curtis</a><p class="description">Endless learning, progress together!</p></div><div id="nav-menu"><a class="current" href="/en/."><i class="fa fa-home"> Home</i></a><a href="/en/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/en/about/"><i class="fa fa-user"> About</i></a><a href="/en/atom.xml"><i class="fa fa-rss"> RSS</i></a><a href="/en/guestbook/"><i class="fa fa-comments"> Guestbook</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">OpenStack Kolla-Ansible部署Swift文件存储 对接Ceph RadosGW，Proxmox</h1><div class="post-meta">2023-02-07<span> | </span><span class="category"><a href="/en/categories/%E9%BB%98%E8%AE%A4/">默认</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.2k</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 5</span><span class="post-meta-item-text"> Minutes</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%89%8D%E8%A8%80"><span class="toc-text">1. 前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Ceph%E9%85%8D%E7%BD%AE"><span class="toc-text">2. Ceph配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%A3%80%E6%9F%A5Ceph-conf"><span class="toc-text">2.1 检查Ceph.conf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%AF%B9%E6%8E%A5Keystone"><span class="toc-text">2.2 对接Keystone</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-3-%E8%8E%B7%E5%8F%96Auth-Token"><span class="toc-text">2.3 获取Auth Token</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E9%85%8D%E7%BD%AERadosGW"><span class="toc-text">2.4 配置RadosGW</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-kolla%E9%85%8D%E7%BD%AE"><span class="toc-text">3. kolla配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%90%AF%E7%94%A8-Ceph-RadosGW-%E9%9B%86%E6%88%90"><span class="toc-text">3.1 启用 Ceph RadosGW 集成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%B7%BB%E5%8A%A0rgw%E4%B8%BB%E6%9C%BA"><span class="toc-text">3.2 添加rgw主机</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E9%87%8D%E6%96%B0%E9%83%A8%E7%BD%B2"><span class="toc-text">4. 重新部署</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E9%AA%8C%E8%AF%81"><span class="toc-text">5. 验证</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E9%AA%8C%E8%AF%81%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-text">5.1 验证负载均衡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-2-%E9%AA%8C%E8%AF%81%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">5.2 验证客户端</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-3-%E9%AA%8C%E8%AF%81Horizon"><span class="toc-text">5.3 验证Horizon</span></a></li></ol></div></div><div class="post-content"><p> 书接上回 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35485875/article/details/128901696">OpenStack Kolla-Ansible部署Cinder块存储 对接Ceph，Proxmox</a></p>
<p>本章我们继续来完成OpenStack示例配置组件之Web Application中的Swift文件存储，OpenStack中的Swift文件存储对接Ceph RadosGW</p>
<blockquote>
<p>实际上应该是ceph RadosGW对接OpenStack Keystone身份认证</p>
<p>因为RadosGW提供了和Swift兼容的API，所有二者api是一样的，直接做个负载均衡到RadosGW就成了一个swift接口 </p>
</blockquote>
<hr>
<h1 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h1><p>ceph官方latest文档已经很落后了，搞得整了好久才弄明白。要知道ceph.conf配置中的键如果是空格形式的（形如“rgw keystone api version”），这种是ceph octopus版本最后一次出现，在pacific版本改为下划线形式。</p>
<p>并且网上教程包括官网教程重点都在以Keystone V2版本api为例说明，没有V3接口版本的例子。</p>
<blockquote>
<p>求证：</p>
<p>octopus版本的ceph.conf例子：<a target="_blank" rel="noopener" href="https://docs.ceph.com/en/octopus/rados/configuration/common/#example-ceph-conf">Common Settings — Ceph Documentation</a></p>
<p>pacific版本的ceph.conf例子：<a target="_blank" rel="noopener" href="https://docs.ceph.com/en/pacific/rados/configuration/common/#example-ceph-conf">Common Settings — Ceph Documentation</a></p>
<p>发行索引：<a target="_blank" rel="noopener" href="https://docs.ceph.com/en/latest/releases/">Ceph Releases (index) — Ceph Documentation</a></p>
</blockquote>
<p> <strong>重点：</strong></p>
<p>如果使用kolla-ansible部署RadosGW兼容的Swift，不要去找那种“手动部署RadosGW对接Swift”的教程，因为kolla-ansible已经为你准备好了OpenStack这边的一切配置。所有有关OpenStack这边的操作都不要做！！！</p>
<blockquote>
<p>RadosGW兼容的Swift：实际上没有部署Swift，可以理解为把原本Swift的api重定向到了RadosGW。而RadosGW有着和Swift一样的api。</p>
</blockquote>
<h1 id="2-Ceph配置"><a href="#2-Ceph配置" class="headerlink" title="2. Ceph配置"></a>2. Ceph配置</h1><p>RadosGW安装配置这里不再赘述，请参阅：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35485875/article/details/128906309">ProxmoxVE配置Ceph Object Gateway对象网关，开启Ceph Object Storage对象存储_JamesCurtis的博客-CSDN博客</a></p>
<h2 id="2-1-检查Ceph-conf"><a href="#2-1-检查Ceph-conf" class="headerlink" title="2.1 检查Ceph.conf"></a>2.1 检查Ceph.conf</h2><p>做完之后你的ceph.conf应该大致如下：</p>
<blockquote>
<p>建议取消所有缩进</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">auth_client_required = cephx</span><br><span class="line">auth_cluster_required = cephx</span><br><span class="line">auth_service_required = cephx</span><br><span class="line">cluster_network = 10.10.11.1/24</span><br><span class="line">fsid = 59063611-9b12-4807-bf9d-ecfa60480d94</span><br><span class="line">mon_allow_pool_delete = true</span><br><span class="line">mon_host = 10.10.1.51</span><br><span class="line">ms_bind_ipv4 = true</span><br><span class="line">ms_bind_ipv6 = false</span><br><span class="line">osd_pool_default_min_size = 2</span><br><span class="line">osd_pool_default_size = 2</span><br><span class="line">public_network = 10.10.1.51/24</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">keyring = /etc/pve/priv/$cluster.$name.keyring</span><br><span class="line"></span><br><span class="line">[client.radosgw.pve1]</span><br><span class="line">host = pve1</span><br><span class="line">keyring = /etc/pve/priv/ceph.client.radosgw.keyring</span><br><span class="line"></span><br><span class="line">[mds]</span><br><span class="line">keyring = /var/lib/ceph/mds/ceph-$id/keyring</span><br><span class="line"></span><br><span class="line">[mds.pve1]</span><br><span class="line">host = pve1</span><br><span class="line">mds standby for name = pve</span><br><span class="line"></span><br><span class="line">[mon.pve1]</span><br><span class="line">public_addr = 10.10.1.51</span><br></pre></td></tr></table></figure>



<h2 id="2-2-对接Keystone"><a href="#2-2-对接Keystone" class="headerlink" title="2.2 对接Keystone"></a>2.2 对接Keystone</h2><p>这里需要先安装一个cli client工具。进入部署机，激活python虚拟环境，source admin授权文件，安装</p>
<blockquote>
<p>至于文档怎么找，入口在哪里，请参阅：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35485875/article/details/128915192">https://blog.csdn.net/qq_35485875/article/details/128915192</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 激活python环境</span><br><span class="line">root@ttt:~# . /path/to/venv/bin/activate</span><br><span class="line"># 激活admin授权文件（后面用到）</span><br><span class="line">(venv) root@ttt:~# . /etc/kolla/admin-openrc.sh</span><br><span class="line"># 安装客户端</span><br><span class="line">(venv) root@ttt:~# pip install python-swiftclient</span><br></pre></td></tr></table></figure>



<p>验证安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(venv) root@ttt:~# swift --help</span><br></pre></td></tr></table></figure>



<h1 id="2-3-获取Auth-Token"><a href="#2-3-获取Auth-Token" class="headerlink" title="2.3 获取Auth Token"></a>2.3 获取Auth Token</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(venv) root@ttt:~# swift auth</span><br><span class="line">export OS_STORAGE_URL=http://10.10.1.250:6780/swift/v1</span><br><span class="line">export OS_AUTH_TOKEN=gAAAAABj4cEubXFK1PLGUicIMKMft6TiWitNcGhzHJxS2CWbetUEYIHbCJMx3v_iLQ142ZgjQ9KvtwLwoDrP-_RctuP45O9FTVr1dAVWrEKZngXpxX2uRVSELz7FP27vmZqtN0</span><br></pre></td></tr></table></figure>



<blockquote>
<p>刚兴趣的可以再试试下面两个命令：</p>
<p>swift auth -v</p>
<p>swift auth –debug </p>
</blockquote>
<p>把OS_AUTH_TOKEN记录下来，回到Proxmox shell</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;gAAAAABj4cID5BqJhJcRPfAJniQ-eqt66praFVJ2ZwSGUMd6QgdUplNUJlih-AGOzYw5t5HOWHiCsTGsMfU2uJpBwbXsC_2Y8hpqSwqqICth8xfLtnivPcKaT__K9CNASb92REHMECmQI&quot; &gt; /etc/ceph/keystone_admin_token</span><br></pre></td></tr></table></figure>



<h2 id="2-4-配置RadosGW"><a href="#2-4-配置RadosGW" class="headerlink" title="2.4 配置RadosGW"></a>2.4 配置RadosGW</h2><p>在Proxmox节点中。打开ceph.conf，在[client.radosgw.pve1]节点下新增：</p>
<blockquote>
<p>文档推荐：</p>
<ol>
<li>kolla-ansible官网(比较难懂)：<a target="_blank" rel="noopener" href="https://docs.openstack.org/kolla-ansible/yoga/reference/storage/external-ceph-guide.html#radosgw">External Ceph — kolla-ansible 14.7.1.dev18 documentation</a> </li>
<li>Ceph官网：<a target="_blank" rel="noopener" href="https://docs.ceph.com/en/quincy/radosgw/keystone/">Integrating with OpenStack Keystone — Ceph Documentation</a></li>
</ol>
<p><a target="_blank" rel="noopener" href="https://docs.ceph.com/en/quincy/man/8/radosgw/">radosgw – rados REST gateway — Ceph Documentation</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.ceph.com/en/quincy/radosgw/config-ref/">Ceph Object Gateway Config Reference — Ceph Documentation</a></p>
<ol start="3">
<li>SUSE官网（中文）：<a target="_blank" rel="noopener" href="https://documentation.suse.com/zh-cn/ses/7/html/ses-all/cha-ceph-gw.html#ogw-keystone">https://documentation.suse.com/zh-cn/ses/7/html/ses-all/cha-ceph-gw.html#ogw-keystone</a></li>
</ol>
<p><a target="_blank" rel="noopener" href="https://documentation.suse.com/zh-cn/ses/7/html/ses-all/cha-ceph-configuration.html#config-ogw">https://documentation.suse.com/zh-cn/ses/7/html/ses-all/cha-ceph-configuration.html#config-ogw</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># common</span><br><span class="line">rgw_keystone_url = 10.10.1.250:5000</span><br><span class="line">rgw_keystone_api_version = 3</span><br><span class="line"># rgw_keystone_verify_ssl = false</span><br><span class="line"></span><br><span class="line"># v3</span><br><span class="line">rgw_keystone_admin_domain = Default</span><br><span class="line">rgw_keystone_admin_project = admin</span><br><span class="line">rgw_keystone_admin_token = gAAAAABj4bqH7oqC7X45z41YGsrBR5U5RfMbHylk6nlk2ZquW58h0</span><br><span class="line"></span><br><span class="line"># other</span><br><span class="line"># rgw_s3_auth_use_keystone = true</span><br><span class="line"># rgw_swift_account_in_url = true</span><br></pre></td></tr></table></figure>



<p>完成后，整个ceph.conf看起来如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">auth_client_required = cephx</span><br><span class="line">auth_cluster_required = cephx</span><br><span class="line">auth_service_required = cephx</span><br><span class="line">cluster_network = 10.10.11.1/24</span><br><span class="line">fsid = 59063611-9b12-4807-bf9d-ecfa60480d94</span><br><span class="line">mon_allow_pool_delete = true</span><br><span class="line">mon_host = 10.10.1.51</span><br><span class="line">ms_bind_ipv4 = true</span><br><span class="line">ms_bind_ipv6 = false</span><br><span class="line">osd_pool_default_min_size = 2</span><br><span class="line">osd_pool_default_size = 2</span><br><span class="line">public_network = 10.10.1.51/24</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">keyring = /etc/pve/priv/$cluster.$name.keyring</span><br><span class="line"></span><br><span class="line">[client.radosgw.pve1]</span><br><span class="line">host = pve1</span><br><span class="line">keyring = /etc/pve/priv/ceph.client.radosgw.keyring</span><br><span class="line"></span><br><span class="line"># common</span><br><span class="line">rgw_keystone_url = 10.10.1.250:5000</span><br><span class="line">rgw_keystone_api_version = 3</span><br><span class="line"># rgw_keystone_verify_ssl = false</span><br><span class="line"></span><br><span class="line"># v3</span><br><span class="line">rgw_keystone_admin_domain = Default</span><br><span class="line">rgw_keystone_admin_project = admin</span><br><span class="line">rgw_keystone_admin_token = gAAAAABj4bqH7oqC7X45z41YGs</span><br><span class="line"></span><br><span class="line"># other</span><br><span class="line"># rgw_s3_auth_use_keystone = true</span><br><span class="line"># rgw_swift_account_in_url = true</span><br><span class="line"></span><br><span class="line">[mds]</span><br><span class="line">keyring = /var/lib/ceph/mds/ceph-$id/keyring</span><br><span class="line"></span><br><span class="line">[mds.pve1]</span><br><span class="line">host = pve1</span><br><span class="line">mds standby for name = pve</span><br><span class="line"></span><br><span class="line">[mon.pve1]</span><br><span class="line">public_addr = 10.10.1.51</span><br></pre></td></tr></table></figure>



<p> 上传保存，重启RadosGW</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@pve1:~# systemctl restart radosgw</span><br></pre></td></tr></table></figure>



<h1 id="3-kolla配置"><a href="#3-kolla配置" class="headerlink" title="3. kolla配置"></a>3. kolla配置</h1><h2 id="3-1-启用-Ceph-RadosGW-集成"><a href="#3-1-启用-Ceph-RadosGW-集成" class="headerlink" title="3.1 启用 Ceph RadosGW 集成"></a>3.1 启用 Ceph RadosGW 集成</h2><p>在部署机，global.yml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enable_ceph_rgw: true</span><br></pre></td></tr></table></figure>



<h2 id="3-2-添加rgw主机"><a href="#3-2-添加rgw主机" class="headerlink" title="3.2 添加rgw主机"></a>3.2 添加rgw主机</h2><p>在enable_ceph_rgw: “yes”下面一行，增加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ceph_rgw_hosts:</span><br><span class="line">  - host: rgw01</span><br><span class="line">    ip: 10.10.1.51</span><br><span class="line">    port: 7480</span><br></pre></td></tr></table></figure>



<p>host是名字随意，不需要解析dns，但是一定要填写ip</p>
<p>端口7480，是RadosGW默认端口，可以在RadosGW文档中查询到rgw_frontends属性</p>
<h1 id="4-重新部署"><a href="#4-重新部署" class="headerlink" title="4. 重新部署"></a>4. 重新部署</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kolla-ansible -i ./multinode deploy</span><br></pre></td></tr></table></figure>



<h1 id="5-验证"><a href="#5-验证" class="headerlink" title="5. 验证"></a>5. 验证</h1><h2 id="5-1-验证负载均衡"><a href="#5-1-验证负载均衡" class="headerlink" title="5.1 验证负载均衡"></a>5.1 验证负载均衡</h2><blockquote>
<p>haproxy报告查看：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35485875/article/details/128915789">https://blog.csdn.net/qq_35485875/article/details/128915789</a> </p>
</blockquote>
<p>radosgw_back都是绿色就行</p>
<p><img src="https://raw.githubusercontent.com/james-curtis/james-curtis.github.io/main/static/images/16936493045351693649304108.png" alt="16936493045351693649304108.png"></p>
<h1 id="5-2-验证客户端"><a href="#5-2-验证客户端" class="headerlink" title="5.2 验证客户端"></a>5.2 验证客户端</h1><p>回到部署机，输入 swift stat</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(venv) root@ttt:~# swift stat</span><br><span class="line">                                    Account: v1</span><br><span class="line">                                 Containers: 0</span><br><span class="line">                                    Objects: 0</span><br><span class="line">                                      Bytes: 0</span><br><span class="line">   Containers in policy &quot;default-placement&quot;: 0</span><br><span class="line">      Objects in policy &quot;default-placement&quot;: 0</span><br><span class="line">        Bytes in policy &quot;default-placement&quot;: 0</span><br><span class="line">Objects in policy &quot;default-placement-bytes&quot;: 0</span><br><span class="line">  Bytes in policy &quot;default-placement-bytes&quot;: 0</span><br><span class="line">                                X-Timestamp: 1675740884.45155</span><br><span class="line">                X-Account-Bytes-Used-Actual: 0</span><br><span class="line">                                 X-Trans-Id: tx000008f5efad48bd19d87-0063e1c6d4-96a42-default</span><br><span class="line">                     X-Openstack-Request-Id: tx000008f5efad48bd19d87-0063e1c6d4-96a42-default</span><br><span class="line">                              Accept-Ranges: bytes</span><br><span class="line">                               Content-Type: text/plain; charset=utf-8</span><br><span class="line">(venv) root@ttt:~# </span><br></pre></td></tr></table></figure>



<h1 id="5-3-验证Horizon"><a href="#5-3-验证Horizon" class="headerlink" title="5.3 验证Horizon"></a>5.3 验证Horizon</h1><p>重新登录Horizon，项目-&gt;对象存储-&gt;容器</p>
<p>随便创建一个</p>
<p><img src="https://raw.githubusercontent.com/james-curtis/james-curtis.github.io/main/static/images/16936493265351693649325696.png" alt="16936493265351693649325696.png"></p>
<p>创建成功</p>
<p><img src="https://raw.githubusercontent.com/james-curtis/james-curtis.github.io/main/static/images/16936493485401693649348161.png" alt="16936493485401693649348161.png"></p>
<p>上传文件，再下载，没问题</p>
<p><img src="https://raw.githubusercontent.com/james-curtis/james-curtis.github.io/main/static/images/16936493665351693649365784.png" alt="16936493665351693649365784.png"></p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/en/2023/openstack-kolla-ansible-deploys-octavia-load-balancing-service/">OpenStack Kolla-Ansible部署Octavia负载均衡服务</a><a class="next" href="/en/2023/where-is-the-openstack-haproxy-statistics-report-statistics-report-and-how-to-open-the-haproxy-dashboard/">OpenStack haproxy Statistics Report统计报告怎么在哪里，haproxy Dashboard怎么打开</a></div><script src="https://utteranc.es/client.js" repo="james-curtis/james-curtis.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="About"><img class="nofancybox" src="https://avatars.githubusercontent.com/james-curtis"/></a><p>To be a better man.</p><a class="info-icon" href="https://twitter.com/james_curtis_oh" title="Twitter" target="_blank" style="margin-inline:5px"> <i class="fa fa-twitter-square" style="margin-inline:5px"></i></a><a class="info-icon" href="mailto:jamescurtis@foxmail.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/james-curtis" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/en/categories/Default/">Default</a><span class="category-list-count">40</span></li><li class="category-list-item"><a class="category-list-link" href="/en/categories/%E9%BB%98%E8%AE%A4/">默认</a><span class="category-list-count">36</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/en/2023/ndi-hx-camera-apk-newtek-ndi-apk/">NDI HX Camera apk | NewTek NDI apk</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/windows-remaps-capslock-to-ctrl/">Windows 重新映射 CapsLock 大写锁定到 Ctrl</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/how-can-non-root-ordinary-users-directly-execute-docker-commands-in-wsl-ubuntu/">WSL Ubuntu 中非 root 的普通用户怎么直接执行 Docker 命令</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/full-stack-development-and-deep-learning-tensorflow-pytorch-gpu-acceleration-using-nvidia-docker-in-wsl2/">在 WSL2 中使用 NVIDIA Docker 进行全栈开发和深度学习 TensorFlow pytorch GPU 加速</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/how-to-change-man-help-to-chinese-in-debian-how-to-change-the-display-language-of-wsl-to-chinese/">debian 怎么修改 man help 为中文，wsl 怎么修改显示语言为中文</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/how-to-use-vim-vim-usage-tutorial-how-to-switch-vimtutor-to-chinese-and-chinese/">vim怎么使用，vim使用教程，vimtutor怎么切换中文 汉化</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/wsl2-error-cannot-execute-binary-file-exec-format-error/">WSL2 Error “cannot execute binary file Exec format error“</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/replace-the-linux-wenquanyi-zhenghei-fonts-wqy-zenhei-font-and-replace-the-linux-default-chinese-font/">替换linux的文泉驿正黑fonts-wqy-zenhei字体 替换linux默认中文字体</a></li><li class="post-list-item"><a class="post-list-link" href="/en/2023/2023-frequency-of-use-of-various-diagrams-in-software-engineering-in-modern-enterprise-level-development/">2023软件工程中各种图在现代企业级开发中的使用频率</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="/" title="中文博客" target="_blank">中文博客</a><ul></ul><a href="/en" title="EN Blog" target="_blank">EN Blog</a><ul></ul><a href="https://github.com/james-curtis" title="GitHub" target="_blank">GitHub</a><ul></ul><a href="https://james-curtis.github.io/css-handbook/" title="CSS 参考手册" target="_blank">CSS 参考手册</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 <a href="/en/." rel="nofollow">James Curtis.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/en/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/en/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/en/css/search.css?v=1.0.0"><script type="text/javascript" src="/en/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/en/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/en/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/en/css/copycode.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="/en/css/external.css?v=1.0.0"><script type="text/javascript" src="/en/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/en/js/smartresize.js?v=1.0.0"></script></div></body></html>